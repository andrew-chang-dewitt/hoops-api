{"openapi":"3.0.2","info":{"title":"FastAPI","version":"0.1.0"},"paths":{"/":{"get":{"tags":["API Status"],"summary":"Check API status.","description":"Check API status.","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Status"}}}}}}},"/user":{"get":{"tags":["User"],"summary":"Get the currently authenticated User.","description":"Get the current user's information.","operationId":"get_user_user_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserOut"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"put":{"tags":["User"],"summary":"Update the currently authenticated User's information.","description":"Update the current user's information.","operationId":"put_user_user_put","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserChanges"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"post":{"tags":["User"],"summary":"Create a new User.","description":"Save a new User to the database & return the new information.","operationId":"post_user_user_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserIn"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["User"],"summary":"Delete the currently authenticated User.","description":"Delete the current user from the database.","operationId":"delete_user_user_delete","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserOut"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/user/password":{"put":{"tags":["User"],"summary":"Update the currently authenticated User's password.","description":"Update the current user's password.","operationId":"put_password_user_password_put","requestBody":{"content":{"application/json":{"schema":{"title":"New Password","type":"string"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/token":{"post":{"tags":["Authentication"],"summary":"Get an authentication Token via an OAuth2 Request Form.","description":"POST `/token` handler.","operationId":"post_token_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_post_token_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Token"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/account":{"get":{"tags":["Account"],"summary":"Get the Accounts for the currently authenticated User.","description":"Read all open accounts for given User.","operationId":"get_account_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"title":"Response Get Account Get","type":"array","items":{"$ref":"#/components/schemas/AccountOut"}}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"post":{"tags":["Account"],"summary":"Create a new Account for the currently authenticated User.","description":"Create a new account for given User.","operationId":"post_account_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AccountIn"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AccountOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/account/{account_id}":{"put":{"tags":["Account"],"summary":"Update the given Account.","description":"Update the given account with the given changes.","operationId":"put_id_account__account_id__put","parameters":[{"required":true,"schema":{"title":"Account Id","type":"string","format":"uuid"},"name":"account_id","in":"path"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AccountChanges"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AccountOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/account/{account_id}/closed":{"put":{"tags":["Account"],"summary":"Mark the given Account as closed.","description":"Mark the given account as closed.","operationId":"put_closed_account__account_id__closed_put","parameters":[{"required":true,"schema":{"title":"Account Id","type":"string","format":"uuid"},"name":"account_id","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AccountOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/account/closed":{"get":{"tags":["Account"],"summary":"Get all closed Accounts for current User.","description":"Mark the given account as closed.","operationId":"get_closed_account_closed_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"title":"Response Get Closed Account Closed Get","type":"array","items":{"$ref":"#/components/schemas/AccountOut"}}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/transaction":{"get":{"tags":["Transaction"],"summary":"Fetch all Transactions for the authenticated User.","description":"Get all Transactions.","operationId":"get_root_transaction_get","parameters":[{"description":"Only return Transactions belonging to this Account.","required":false,"schema":{"title":"Account Id","type":"string","description":"Only return Transactions belonging to this Account.","format":"uuid"},"name":"account_id","in":"query"},{"description":"Only return Transactions with matching payee.","required":false,"schema":{"title":"Payee","type":"string","description":"Only return Transactions with matching payee."},"name":"payee","in":"query"},{"description":"Only return Transactions greater than or equal to amount.","required":false,"schema":{"title":"Minimum Amount","type":"number","description":"Only return Transactions greater than or equal to amount."},"name":"minimum_amount","in":"query"},{"description":"Only return Transactions less than or equal to amount.","required":false,"schema":{"title":"Maximum Amount","type":"number","description":"Only return Transactions less than or equal to amount."},"name":"maximum_amount","in":"query"},{"description":"Only return Transactions after the given date & time.","required":false,"schema":{"title":"After","type":"string","description":"Only return Transactions after the given date & time.","format":"date-time"},"name":"after","in":"query"},{"description":"Only return Transactions before the given date & time.","required":false,"schema":{"title":"Before","type":"string","description":"Only return Transactions before the given date & time.","format":"date-time"},"name":"before","in":"query"},{"description":"Only return specified number of Transactions.","required":false,"schema":{"title":"Limit","type":"integer","description":"Only return specified number of Transactions.","default":50},"name":"limit","in":"query"},{"description":"Return given page of Transactions.","required":false,"schema":{"title":"Page","type":"integer","description":"Return given page of Transactions.","default":0},"name":"page","in":"query"},{"description":"Sort Transactions by given column.","required":false,"schema":{"title":"Sort","type":"string","description":"Sort Transactions by given column.","default":"timestamp"},"name":"sort","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"title":"Response Get Root Transaction Get","type":"array","items":{"$ref":"#/components/schemas/TransactionOut"}}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"post":{"tags":["Transaction"],"summary":"Create a new Transaction for the given Account.","description":"Save given Transaction to database.","operationId":"post_root_transaction_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionIn"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/transaction/{transaction_id}":{"put":{"tags":["Transaction"],"summary":"Edit the given Transaction.","description":"Edit the given Transaction.","operationId":"put_id_transaction__transaction_id__put","parameters":[{"required":true,"schema":{"title":"Transaction Id","type":"string","format":"uuid"},"name":"transaction_id","in":"path"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionChanges"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"delete":{"tags":["Transaction"],"summary":"Delete the given Transaction.","description":"Delete the given Transaction.","operationId":"delete_id_transaction__transaction_id__delete","parameters":[{"required":true,"schema":{"title":"Transaction Id","type":"string","format":"uuid"},"name":"transaction_id","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/balance/total":{"get":{"tags":["Balance"],"summary":"Get sum total Balance of all accounts for the current User.","operationId":"get_root_balance_total_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Balance"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/balance/account/{account_id}":{"get":{"tags":["Balance"],"summary":"Get the Balance for the given account.","operationId":"get_account_balance_account__account_id__get","parameters":[{"required":true,"schema":{"title":"Account Id","type":"string","format":"uuid"},"name":"account_id","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Balance"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/balance/envelope/{envelope_id}":{"get":{"tags":["Balance"],"summary":"Get the balance of a given Envelope.","operationId":"get_envelope_balance_envelope__envelope_id__get","parameters":[{"required":true,"schema":{"title":"Envelope Id","type":"string","format":"uuid"},"name":"envelope_id","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Balance"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/balance/available":{"get":{"tags":["Balance"],"summary":"Get the Available Balance.","operationId":"get_available_balance_available_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Balance"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/envelope":{"get":{"tags":["Envelope"],"summary":"Get all Envelopes for current user.","operationId":"get_root_envelope_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"title":"Response Get Root Envelope Get","type":"array","items":{"$ref":"#/components/schemas/EnvelopeOut"}}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"post":{"tags":["Envelope"],"summary":"Create new Envelope.","operationId":"post_root_envelope_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EnvelopeIn"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EnvelopeOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/envelope/{envelope_id}":{"get":{"tags":["Envelope"],"summary":"Get requested Envelope for current user.","operationId":"get_id_envelope__envelope_id__get","parameters":[{"required":true,"schema":{"title":"Envelope Id","type":"string","format":"uuid"},"name":"envelope_id","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EnvelopeOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"put":{"tags":["Envelope"],"summary":"Update the given Envelope.","operationId":"put_id_envelope__envelope_id__put","parameters":[{"required":true,"schema":{"title":"Envelope Id","type":"string","format":"uuid"},"name":"envelope_id","in":"path"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EnvelopeChanges"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EnvelopeOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/envelope/{envelope_id}/funds/{amount}":{"put":{"tags":["Envelope"],"summary":"Add given funds to Envelope.","operationId":"put_funds_envelope__envelope_id__funds__amount__put","parameters":[{"required":true,"schema":{"title":"Envelope Id","type":"string","format":"uuid"},"name":"envelope_id","in":"path"},{"required":true,"schema":{"title":"Amount","type":"number"},"name":"amount","in":"path"},{"description":"Where take funds from; default: Available Balance.","required":false,"schema":{"title":"Source","type":"string","description":"Where take funds from; default: Available Balance.","format":"uuid"},"name":"source","in":"query"},{"description":"Move funds out of this Envelope.","required":false,"schema":{"title":"Out","type":"boolean","description":"Move funds out of this Envelope.","default":false},"name":"out","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EnvelopeOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}}},"components":{"schemas":{"AccountChanges":{"title":"AccountChanges","type":"object","properties":{"name":{"title":"Name","type":"string"},"closed":{"title":"Closed","type":"boolean"}},"additionalProperties":false,"description":"Fields used when updating an Account, all are optional."},"AccountIn":{"title":"AccountIn","required":["name"],"type":"object","properties":{"name":{"title":"Name","type":"string"}},"additionalProperties":false,"description":"Fields needed from user to create an Account."},"AccountOut":{"title":"AccountOut","required":["id","name","user_id","closed"],"type":"object","properties":{"id":{"title":"Id","type":"string","format":"uuid"},"name":{"title":"Name","type":"string"},"user_id":{"title":"User Id","type":"string","format":"uuid"},"closed":{"title":"Closed","type":"boolean"}},"additionalProperties":false,"description":"Fields returned by Account queries."},"Balance":{"title":"Balance","required":["amount","user_id"],"type":"object","properties":{"amount":{"title":"Amount","type":"number"},"collection":{"title":"Collection","type":"string"},"collection_id":{"title":"Collection Id","type":"string","format":"uuid"},"collection_type":{"title":"Collection Type","anyOf":[{"enum":["account"],"type":"string"},{"enum":["envelope"],"type":"string"}]},"user_id":{"title":"User Id","type":"string","format":"uuid"}},"additionalProperties":false,"description":"Balance information."},"Body_post_token_post":{"title":"Body_post_token_post","required":["username","password"],"type":"object","properties":{"grant_type":{"title":"Grant Type","pattern":"password","type":"string"},"username":{"title":"Username","type":"string"},"password":{"title":"Password","type":"string"},"scope":{"title":"Scope","type":"string","default":""},"client_id":{"title":"Client Id","type":"string"},"client_secret":{"title":"Client Secret","type":"string"}}},"EnvelopeChanges":{"title":"EnvelopeChanges","type":"object","properties":{"name":{"title":"Name","type":"string"},"total_funds":{"title":"Total Funds","type":"number"}},"additionalProperties":false,"description":"Fields used when updating an Envelope, all are optional."},"EnvelopeIn":{"title":"EnvelopeIn","required":["name"],"type":"object","properties":{"name":{"title":"Name","type":"string"}},"additionalProperties":false,"description":"Fields needed from user to create an Envelope."},"EnvelopeOut":{"title":"EnvelopeOut","required":["id","name","user_id","total_funds"],"type":"object","properties":{"id":{"title":"Id","type":"string","format":"uuid"},"name":{"title":"Name","type":"string"},"user_id":{"title":"User Id","type":"string","format":"uuid"},"total_funds":{"title":"Total Funds","type":"number"}},"additionalProperties":false,"description":"Fields returned by Envelope queries."},"HTTPValidationError":{"title":"HTTPValidationError","type":"object","properties":{"detail":{"title":"Detail","type":"array","items":{"$ref":"#/components/schemas/ValidationError"}}}},"Status":{"title":"Status","required":["message","ok"],"type":"object","properties":{"message":{"title":"Message","type":"string"},"ok":{"title":"Ok","type":"boolean"}},"description":"Status Response."},"Token":{"title":"Token","required":["access_token"],"type":"object","properties":{"access_token":{"title":"Access Token","type":"string"},"token_type":{"title":"Token Type","type":"string","default":"bearer"}},"description":"Token fields."},"TransactionChanges":{"title":"TransactionChanges","type":"object","properties":{"amount":{"title":"Amount","type":"number"},"description":{"title":"Description","type":"string"},"payee":{"title":"Payee","type":"string"},"timestamp":{"title":"Timestamp","type":"string","format":"date-time"},"account_id":{"title":"Account Id","type":"string","format":"uuid"},"spent_from":{"title":"Spent From","type":"string","format":"uuid"}},"additionalProperties":false,"description":"Object for changing any of the fields on an existing Transaction."},"TransactionIn":{"title":"TransactionIn","required":["amount","description","payee","timestamp","account_id"],"type":"object","properties":{"amount":{"title":"Amount","type":"number"},"description":{"title":"Description","type":"string"},"payee":{"title":"Payee","type":"string"},"timestamp":{"title":"Timestamp","type":"string","format":"date-time"},"account_id":{"title":"Account Id","type":"string","format":"uuid"},"spent_from":{"title":"Spent From","type":"string","format":"uuid"}},"additionalProperties":false,"description":"Fields used when creating a new Transaction."},"TransactionOut":{"title":"TransactionOut","required":["id","amount","description","payee","timestamp","account_id"],"type":"object","properties":{"id":{"title":"Id","type":"string","format":"uuid"},"amount":{"title":"Amount","type":"number"},"description":{"title":"Description","type":"string"},"payee":{"title":"Payee","type":"string"},"timestamp":{"title":"Timestamp","type":"string","format":"date-time"},"account_id":{"title":"Account Id","type":"string","format":"uuid"},"spent_from":{"title":"Spent From","type":"string","format":"uuid"}},"additionalProperties":false,"description":"Fields used when reading a Transaction."},"UserChanges":{"title":"UserChanges","type":"object","properties":{"handle":{"title":"Handle","type":"string"},"full_name":{"title":"Full Name","type":"string"},"preferred_name":{"title":"Preferred Name","type":"string"}},"additionalProperties":false,"description":"Fields used when updating a User, all are optional."},"UserIn":{"title":"UserIn","required":["handle","full_name","preferred_name","password"],"type":"object","properties":{"handle":{"title":"Handle","type":"string"},"full_name":{"title":"Full Name","type":"string"},"preferred_name":{"title":"Preferred Name","type":"string"},"password":{"title":"Password","type":"string"}},"additionalProperties":false,"description":"Fields required to create a new User."},"UserOut":{"title":"UserOut","required":["id","handle","full_name","preferred_name"],"type":"object","properties":{"id":{"title":"Id","type":"string","format":"uuid"},"handle":{"title":"Handle","type":"string"},"full_name":{"title":"Full Name","type":"string"},"preferred_name":{"title":"Preferred Name","type":"string"}},"additionalProperties":false,"description":"Fields returned by queries on User Model."},"ValidationError":{"title":"ValidationError","required":["loc","msg","type"],"type":"object","properties":{"loc":{"title":"Location","type":"array","items":{"type":"string"}},"msg":{"title":"Message","type":"string"},"type":{"title":"Error Type","type":"string"}}}},"securitySchemes":{"OAuth2PasswordBearer":{"type":"oauth2","flows":{"password":{"scopes":{},"tokenUrl":"token"}}}}}}